function mooBuildModifiersPanel(o,e,i,r){null==r&&(r={inlineDisplay:!1,qtyForAll:!0,qtyForZeroPrice:!0});var t=o.length,n="";if(t>1){if(void 0!==r.inlineDisplay&&!0===r.inlineDisplay)var a='<div class="white-popup moo-modifiersPanel" style="background-color: #ffffff">';else a='<div class="white-popup moo-modifiersPanel" >';a+='<form action="" id="moo-modifiers-for-'+e+'"><div class="moo-row" style="margin-bottom: 15px;">',a+='<div class="moo-col-md-6 moo-col-lg-6 moo-col-sm-12 moo-col-xs-12">';for(var l=0;l<Math.ceil(t/2);l++){var s=(m=o[l]).uuid;null!=m.min_required&&m.min_required>0&&(n+=m.uuid+"-"+m.min_required+";"),a+='<div class="mooModifierGroup"><div class="mooModifiers-title" onclick="MooClickOnModifiersCollaps(this,\''+s+"')\"><span>-</span>"+m.name,a+='<span class="mooModifiers-title-span">',a+=mooBuildNbModifierSpan(m.min_required,m.max_allowd),a+="</span>",a+="</div>",a+='<div class="mooModifiers-wrapper mooModifiers-wrapper-for-'+s+'">';for(var d=0;d<m.modifiers.length;d++)a+=mooBuildOneModifierLineHtml(m.modifiers[d],s,m.min_required,m.max_allowd,r);a+="</div>",a+="</div>"}a+="</div>",a+='<div class="moo-col-md-6 moo-col-lg-6 moo-col-sm-12 moo-col-xs-12">';for(l=Math.ceil(t/2);l<t;l++){s=(m=o[l]).uuid;null!=m.min_required&&m.min_required>0&&(n+=m.uuid+"-"+m.min_required+";"),a+='<div class="mooModifierGroup"><div class="mooModifiers-title" onclick="MooClickOnModifiersCollaps(this,\''+s+"')\"><span>-</span>"+m.name,a+='<span class="mooModifiers-title-span">',a+=mooBuildNbModifierSpan(m.min_required,m.max_allowd),a+="</span>",a+="</div>",a+='<div class="mooModifiers-wrapper mooModifiers-wrapper-for-'+s+'">';for(d=0;d<m.modifiers.length;d++)a+=mooBuildOneModifierLineHtml(m.modifiers[d],s,m.min_required,m.max_allowd,r);a+="</div>",a+="</div>"}a+="</div>"}else{if(void 0!==r.inlineDisplay&&!0===r.inlineDisplay)a='<div class="white-popup moo-modifiersPanel" style="max-width:450px;background-color: #ffffff">';else a='<div class="white-popup moo-modifiersPanel" style="max-width:450px;">';a+='<form action="" id="moo-modifiers-for-'+e+'"><div class="moo-row" style="margin-bottom: 15px;"><div class="moo-col-md-12 moo-col-lg-12 moo-col-sm-12 moo-col-xs-12">';for(l=0;l<t;l++){var m;s=(m=o[l]).uuid;null!=m.min_required&&m.min_required>0&&(n+=m.uuid+"-"+m.min_required+";"),a+='<div class="mooModifierGroup"><div class="mooModifiers-title" onclick="MooClickOnModifiersCollaps(this,\''+s+"')\"><span>-</span>"+m.name,a+='<span class="mooModifiers-title-span">',a+=mooBuildNbModifierSpan(m.min_required,m.max_allowd),a+="</span>",a+="</div>",a+='<div class="mooModifiers-wrapper mooModifiers-wrapper-for-'+s+'">';for(d=0;d<m.modifiers.length;d++)a+=mooBuildOneModifierLineHtml(m.modifiers[d],s,m.min_required,m.max_allowd,r);a+="</div>",a+="</div>"}a+="</div>"}a+="</div>",a+='<div class="mooModifier-addToCartBtn2" onclick="ClickOnAddToCartBtnFIWM(event,\''+n+"','"+e+"','"+i+'\')"><a  href="#">Add to Cart</a></div>',a+='<div class="mooModifier-closeBtn" onclick="removeModifiersList(event,\''+e+'\')"><a  href="#">Close</a></div>',a+="</form></div>",void 0===r.inlineDisplay||!1===r.inlineDisplay?jQuery.magnificPopup.open({items:{src:a,type:"inline"},midClick:!0,fixedContentPos:!0,fixedBgPos:!0,overflowY:"scroll",callbacks:function(){var o=0;return{beforeOpen:function(){o=jQuery(window).scrollTop(),jQuery("html").addClass("mfp-helper")},close:function(){jQuery("html").removeClass("mfp-helper"),setTimeout(function(){jQuery("body").animate({scrollTop:o},0)},0)}}}}):jQuery("#moo-modifiersContainer-for-"+e).html(a)}function mooBuildOneModifierLineHtml(o,e,i,r,t){var n=parseFloat(o.price);n/=100;var a=o.uuid,l="";return n>0?(l+='<div class="moo-row"><div class="moo-col-lg-1 moo-col-md-1 moo-col-sm-1 moo-col-xs-1"><input name="'+e+'" value="'+a+'" class="mooModifierCheckbox" type="checkbox" onchange="mooChangeModifierLine(event,\''+a+"','"+i+"','"+r+'\')"></div><div class="moo-col-lg-4 moo-col-md-4 moo-col-sm-5 moo-col-xs-5 mooModifier-name" onclick="mooClickOnModifierLine(event,\''+a+"','"+i+"','"+r+"')\">"+o.name+'</span></div><div class="moo-col-lg-3 moo-col-md-3 moo-col-sm-2 moo-col-xs-2 mooModifier-price">'+(n>0?"$"+n.toFixed(2):"")+'</div><div class="moo-col-lg-4 moo-col-md-4 moo-col-sm-5 moo-col-xs-5">',void 0!==t.qtyForAll&&!1===t.qtyForAll?l+="":l+='<div class="moo-input-group mooModifierLine-QtyContainer"><span class="moo-input-group-btn"><a class="moo-btn moo-btn-primary mooOpBtn" onclick="ClickOnMooOpBtnMinus(\''+e+"','"+a+"','"+r+'\')">-</a></span><input class="mooInputQty moo-form-control" value="1" id="mooModifierInputQty-for-'+a+'"><span class="input-group-btn"><a class="moo-btn moo-btn-primary mooOpBtn" onclick="ClickOnMooOpBtnPlus(\''+e+"','"+a+"','"+r+"')\">+</a></span></div>",l+="</div></div>"):(l+='<div class="moo-row"><div class="moo-col-lg-1 moo-col-md-1 moo-col-sm-1 moo-col-xs-1"><input name="'+e+'" value="'+a+'" class="mooModifierCheckbox" type="checkbox" onchange="mooChangeModifierLine(event,\''+a+"','"+i+"','"+r+'\')"></div><div class="moo-col-lg-7 moo-col-md-7 moo-col-sm-7 moo-col-xs-7 mooModifier-name" onclick="mooClickOnModifierLine(event,\''+a+"','"+i+"','"+r+"')\">"+o.name+'</span></div><div class="moo-col-lg-4 moo-col-md-4 moo-col-sm-5 moo-col-xs-5">',void 0!==t.qtyForAll&&!1===t.qtyForAll?l+="":void 0!==t.qtyForZeroPrice&&!1===t.qtyForZeroPrice?l+="":l+='<div class="moo-input-group mooModifierLine-QtyContainer"><span class="moo-input-group-btn"><a class="moo-btn moo-btn-primary mooOpBtn" onclick="ClickOnMooOpBtnMinus(\''+e+"','"+a+"','"+r+'\')">-</a></span><input class="mooInputQty moo-form-control" value="1" id="mooModifierInputQty-for-'+a+'"><span class="input-group-btn"><a class="moo-btn moo-btn-primary mooOpBtn" onclick="ClickOnMooOpBtnPlus(\''+e+"','"+a+"','"+r+"')\">+</a></span></div>",l+="</div></div>"),l}function mooBuildNbModifierSpan(o,e){var i="";return null!=o&&null!=e&&1==o&&1==e?i+=" (required)":null!=o&&null!=e&&e==o?i+=" (Must choose "+o+" options)":null!=o&&null!=e&&o>=1&&e>1?i+=" (Must choose between "+o+" & "+e+" options)":(null!=o&&1==o&&(i+=" (Must choose at least 1 option)"),null!=o&&o>1&&(i+=" (Must choose at least "+o+" options)"),null!=e&&e>1&&(i+=" (Select up to "+e+" options)"),null!=e&&1==e&&(i+=" (Select one option)")),i}function mooClickOnModifierLine(o,e,i,r){o.preventDefault(),i=parseInt(i),r=parseInt(r);var t=jQuery(o.target).prev(),n=jQuery(".mooModifierCheckbox",t),a='input:checkbox[name="'+n.attr("name")+'"]';if(jQuery(".mooInputQty",n.parent().parent()).val(1),1==r)n.prop("checked")?(n.prop("checked",!1),jQuery(o.target).parent().removeClass("mooModifier-checked"),jQuery(".moo-input-group",jQuery(o.target).parent()).hide()):(jQuery(a).prop("checked",!1),jQuery(a).each(function(o,e){element=jQuery(e),element.parent().parent().removeClass("mooModifier-checked"),jQuery(".moo-input-group",element.parent().parent()).hide()}),n.prop("checked",!0),jQuery(o.target).parent().addClass("mooModifier-checked"));else if(r>1){a='input:checkbox[name="'+n.attr("name")+'"]:checked';var l='input:checkbox[name="'+n.attr("name")+'"]:not(:checked)';n.prop("checked")?(n.prop("checked",!1),jQuery(o.target).parent().removeClass("mooModifier-checked"),jQuery(".moo-input-group",jQuery(o.target).parent()).hide()):(n.prop("checked",!0),jQuery(o.target).parent().addClass("mooModifier-checked"),jQuery(".moo-input-group",jQuery(o.target).parent()).show());var s=0;jQuery(a).each(function(o,e){var i=jQuery(e).val(),r=parseInt(jQuery("#mooModifierInputQty-for-"+i).val());s+=r>1?r:1}),s>=r?jQuery(l).each(function(o,e){element=jQuery(e),element.parent().parent().addClass("mooModifier-disabled")}):jQuery(l).each(function(o,e){element=jQuery(e),element.parent().parent().removeClass("mooModifier-disabled")})}else n.prop("checked")?(n.prop("checked",!1),jQuery(o.target).parent().removeClass("mooModifier-checked"),jQuery(".moo-input-group",jQuery(o.target).parent()).hide()):(n.prop("checked",!0),jQuery(o.target).parent().addClass("mooModifier-checked"),jQuery(".moo-input-group",jQuery(o.target).parent()).show())}function mooChangeModifierLine(o,e,i,r){o.preventDefault();var t=jQuery(o.target);if(jQuery(".mooInputQty",t.parent().parent()).val(1),1==r)if(t.prop("checked")){var n='input:checkbox[name="'+t.attr("name")+'"]';jQuery(n).prop("checked",!1),t.prop("checked",!0),jQuery(n).each(function(o,e){var i=jQuery(e);i.parent().parent().removeClass("mooModifier-checked"),jQuery(".moo-input-group",i.parent().parent()).hide()}),t.parent().parent().addClass("mooModifier-checked")}else t.parent().parent().removeClass("mooModifier-checked"),jQuery(".moo-input-group",t.parent().parent()).hide();else r>1?MooModifiersMax(t.attr("name"),r,t,jQuery(t).parent().parent()):t.prop("checked")?(jQuery(o.target).parent().parent().addClass("mooModifier-checked"),jQuery(".moo-input-group",jQuery(o.target).parent().parent()).show()):(jQuery(o.target).parent().parent().removeClass("mooModifier-checked"),jQuery(".moo-input-group",jQuery(o.target).parent().parent()).hide())}function ClickOnMooOpBtnPlus(o,e,i){var r=jQuery("#mooModifierInputQty-for-"+e).val(),t=parseInt(r);if(null!=i&&i>1){var n=0;jQuery('input:checkbox[name="'+o+'"]:checked').each(function(o,e){var i=jQuery(e).val(),r=parseInt(jQuery("#mooModifierInputQty-for-"+i).val());n+=r>1?r:1}),i>n&&t++;var a=jQuery("#mooModifierInputQty-for-"+e).parent().parent().parent(),l=jQuery(".mooModifierCheckbox",a);jQuery("#mooModifierInputQty-for-"+e).val(t),MooModifiersMax(o,i,l,a)}else t+=1,jQuery("#mooModifierInputQty-for-"+e).val(t)}function ClickOnMooOpBtnMinus(o,e,i){var r=jQuery("#mooModifierInputQty-for-"+e).val(),t=parseInt(r)-1;if(t<1?jQuery("#mooModifierInputQty-for-"+e).val(1):jQuery("#mooModifierInputQty-for-"+e).val(t),null!=i&&i>1){var n=jQuery("#mooModifierInputQty-for-"+e).parent().parent().parent();MooModifiersMax(o,i,jQuery(".mooModifierCheckbox",n),n)}}function MooModifiersMax(o,e,i,r){var t='input:checkbox[name="'+o+'"]:not(:checked)',n=0;jQuery('input:checkbox[name="'+o+'"]:checked').each(function(o,e){var i=jQuery(e).val(),r=parseInt(jQuery("#mooModifierInputQty-for-"+i).val());n+=r>1?r:1}),n>=e?jQuery(t).each(function(o,e){jQuery(e).parent().parent().addClass("mooModifier-disabled")}):jQuery(t).each(function(o,e){jQuery(e).parent().parent().removeClass("mooModifier-disabled")}),i.prop("checked")?(r.addClass("mooModifier-checked"),jQuery(".moo-input-group",r).show()):(r.removeClass("mooModifier-checked"),jQuery(".moo-input-group",r).hide())}function MooClickOnModifiersCollaps(o,e){var i=jQuery(".mooModifiers-wrapper-for-"+e);i.is(":visible")?(i.slideUp(),jQuery("span:first-child",jQuery(o)).text("+")):(i.slideDown(),jQuery("span:first-child",jQuery(o)).text("-"))}function ClickOnAddToCartBtnFIWM(o,e,i,r){o.preventDefault();var t=jQuery("#moo-modifiers-for-"+i).serializeArray(),n=[],a={},l=parseInt(r);if((e=e.split(";")).forEach(function(o){var e=o.split("-");2===e.length&&n.push({uuid:e[0],min:parseInt(e[1])})}),t.forEach(function(o){var e={uuid:o.value,qty:parseInt(jQuery("#mooModifierInputQty-for-"+o.value).val())};(isNaN(e.qty)||e.qty<1)&&(e.qty=1),null==a[o.name]?a[o.name]=[e]:a[o.name].push(e)}),n.length>0){var s=n.length;jQuery(n).each(function(o,e){var r=0;if(jQuery(a[e.uuid]).each(function(o,e){r+=e.qty>1?e.qty:1}),void 0===a[e.uuid]||null==a[e.uuid]||r<e.min){swal("You did not select all of the required options","Please check again","error");var t=jQuery(".mooModifiers-wrapper-for-"+e.uuid).parent();jQuery(".mooModifiers-title",t).css("color","red"),jQuery("div[class*='mooModifiers-wrapper-for-']").each(function(o,e){jQuery(e).slideUp(),jQuery(".mooModifiers-title>span:first-child",jQuery(e).parent()).text("+")});var n=jQuery(".mooModifiers-wrapper-for-"+e.uuid);return n.slideDown(),jQuery(".mooModifiers-title>span:first-child",n.parent()).text("-"),!1}--s||addToCartAnItemWithModifiers(a,i,l)})}else addToCartAnItemWithModifiers(a,i,l)}function addToCartAnItemWithModifiers(o,e,i){var r=Object.keys(o).length;swal({html:'<div class="moo-msgPopup">Adding the items to your cart</div><img src="'+moo_params.plugin_img+'/loading.gif" class="moo-imgPopup"/>',showConfirmButton:!1}),console.log(window.moo_theme_setings);var t=[];if(r>0){for(var n in o)if(jQuery(o[n]).each(function(o,e){t.push(e)}),!--r){var a={item_uuid:e,item_qty:i,item_modifiers:t};jQuery.post(moo_RestUrl+"moo-clover/v1/cart",a,function(o){null!=o?"error"==o.status?swal({title:o.message,type:"error"}):("function"==typeof mooUpdateCart&&mooUpdateCart(),"function"==typeof mooShowAddingItemResult?mooShowAddingItemResult(o):swal({title:null!=o.name?o.name:"Items",text:"Added to cart",timer:3e3,type:"success"}),jQuery.magnificPopup.instance&&jQuery.magnificPopup.close()):swal({title:"Items not added",type:"error"})}).fail(function(o){swal({title:"Items not added",text:"Please verify your internet connection or contact us",type:"error"})}).done(function(o){void 0!==o.nb_items&&void 0!==jQuery("#moo-cartNbItems")&&jQuery("#moo-cartNbItems").text(o.nb_items)})}}else{a={item_uuid:e,item_qty:i,item_modifiers:{}};jQuery.post(moo_RestUrl+"moo-clover/v1/cart",a,function(o){null!=o?("function"==typeof mooUpdateCart&&mooUpdateCart(),"function"==typeof mooShowAddingItemResult?mooShowAddingItemResult(o):swal({title:null!=o.name?o.name:"Items",text:"Added to cart",timer:3e3,type:"success"}),jQuery.magnificPopup.instance&&jQuery.magnificPopup.close()):swal({title:"Item not added",type:"error"})}).fail(function(o){swal({title:"Item not added",text:"Please verify your internet connection or contact us",type:"error"})}).done(function(o){void 0!==o.nb_items&&void 0!==jQuery("#moo-cartNbItems")&&jQuery("#moo-cartNbItems").text(o.nb_items)})}}function removeModifiersList(o,e){if(o.preventDefault(),jQuery.magnificPopup.instance&&jQuery.magnificPopup.close(),void 0===jQuery("#moo-modifiersContainer-for-"+e))return!1;jQuery("#moo-modifiersContainer-for-"+e).html("")}